dellstore2=# CREATE OR REPLACE FUNCTION orders_2004_q1_update_trigger()                                                                                                                                     RETURNS TRIGGER AS $$                                                                                                                                                                                       BEGIN                                                                                                                                                                                                           IF ( NEW.orderdate != OLD.orderdate ) THEN                                                                                                                                                                    DELETE FROM orders_2004_q1                                                                                                                                                                                    WHERE OLD.orderid=orderid;                                                                                                                                                                                INSERT INTO orders values(NEW.*);                                                                                                                                                                         END IF;                                                                                                                                                                                                     RETURN NULL;                                                                                                                                                                                            END;                                                                                                                                                                                                        $$                                                                                                                                                                                                          LANGUAGE plpgsql;
CREATE FUNCTION
dellstore2=# CREATE TRIGGER update_orders_2004_q1                                                                                                                                                                BEFORE UPDATE ON orders_2004_q1                                                                                                                                                                             FOR EACH ROW                                                                                                                                                                                                EXECUTE PROCEDURE orders_2004_q1_update_trigger();                                                                                                                                                     CREATE TRIGGER

